<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Management - Balar Builders</title>
    <!-- Updated for chart redesign deployment -->
    <link rel="stylesheet" href="style.css?v=1.2">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="brand">
                    <h1>Property Management</h1>
                    <span class="brand-subtitle">Balar Builders</span>
                </div>
                <div class="header-actions">
                    <button class="btn btn--secondary" id="viewAnalyticsBtn">
                        <span>üìä Analytics</span>
                    </button>
                    <button class="btn btn--primary" id="addPropertyBtn">
                        <span>+ Add Property</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="main-content main-dashboard" id="mainDashboard">
        <div class="container">
            <!-- Dashboard Summary -->
            <div class="dashboard-summary">
                <div class="summary-card">
                    <h3>Total Properties</h3>
                    <span class="summary-value" id="totalProperties">0</span>
                </div>
                <div class="summary-card">
                    <h3>Active Rentals</h3>
                    <span class="summary-value" id="activeRentals">0</span>
                </div>
                <div class="summary-card">
                    <h3>Pending Bills</h3>
                    <span class="summary-value" id="pendingBills">0</span>
                </div>
                <div class="summary-card">
                    <h3>Monthly Revenue</h3>
                    <span class="summary-value" id="monthlyRevenue">‚Çπ0</span>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="search-section">
                <div class="search-controls">
                    <input type="text" class="form-control search-input" placeholder="Search properties..." id="searchInput">
                    <select class="form-control filter-select" id="typeFilter">
                        <option value="">All Types</option>
                    </select>
                </div>
            </div>

            <!-- Properties Table -->
            <div class="table-container">
                <div class="table-header">
                    <h3>Properties</h3>
                    <button class="btn btn--outline" onclick="openTableSettings()">
                        <span>‚öôÔ∏è</span> Table Settings
                    </button>
                </div>
                <div class="table-scroll-wrapper">
                    <table class="properties-table">
                    <thead>
                        <tr id="propertiesTableHeader">
                            <!-- Headers will be populated by JavaScript -->
                        </tr>
                    </thead>
                    <tbody id="propertiesTableBody">
                        <!-- Properties will be populated by JavaScript -->
                    </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Analytics Dashboard -->
    <div class="main-content hidden" id="analyticsDashboard">
        <div class="container">
            <div class="dashboard-header">
                <div class="dashboard-navigation">
                    <button class="btn btn--outline" id="backToMainBtn">‚Üê Back to Properties</button>
                </div>
                <div class="dashboard-title">
                    <h1>üìä Analytics Dashboard</h1>
                    <p>Comprehensive insights into your property portfolio performance</p>
                </div>
            </div>

            <!-- KPI Summary Cards -->
            <div class="kpi-section">
                <div class="kpi-card">
                    <div class="kpi-icon">üí∞</div>
                    <div class="kpi-content">
                        <h4>Total Revenue</h4>
                        <div class="kpi-value" id="totalRevenueKPI">‚Çπ0</div>
                        <div class="kpi-trend" id="revenueTrend">
                            <span class="trend-indicator">‚Üó</span>
                            <span class="trend-text">+0% this month</span>
                        </div>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-icon">üè†</div>
                    <div class="kpi-content">
                        <h4>Occupancy Rate</h4>
                        <div class="kpi-value" id="occupancyRateKPI">0%</div>
                        <div class="kpi-trend" id="occupancyTrend">
                            <span class="trend-indicator">‚Üó</span>
                            <span class="trend-text">0 properties occupied</span>
                        </div>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-content">
                        <h4>Avg. Rent/Sqft</h4>
                        <div class="kpi-value" id="avgRentPerSqftKPI">‚Çπ0</div>
                        <div class="kpi-trend" id="rentTrend">
                            <span class="trend-indicator">‚Üó</span>
                            <span class="trend-text">Across all properties</span>
                        </div>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-icon">‚è∞</div>
                    <div class="kpi-content">
                        <h4>Payment Efficiency</h4>
                        <div class="kpi-value" id="paymentEfficiencyKPI">0%</div>
                        <div class="kpi-trend" id="efficiencyTrend">
                            <span class="trend-indicator">‚Üó</span>
                            <span class="trend-text">On-time payments</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-section">
                <!-- Revenue Trend Chart -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Monthly Revenue Trend</h3>
                        <div class="chart-controls">
                            <select id="revenuePeriod" class="chart-select">
                                <option value="6">Last 6 Months</option>
                                <option value="12" selected>Last 12 Months</option>
                                <option value="24">Last 24 Months</option>
                            </select>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>

                <!-- Property Status Pie Chart -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Property Status Distribution</h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="propertyStatusChart"></canvas>
                    </div>
                </div>

                <!-- Rental Payment Status Chart -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Rental Payment Status</h3>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="billStatusChart"></canvas>
                    </div>
                </div>

                <!-- Monthly Bill Trends -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>Monthly Bill Trends</h3>
                        <div class="chart-controls">
                            <select id="billTrendsType" class="chart-select">
                                <option value="electricity" selected>Electricity</option>
                                <option value="internet">Internet</option>
                                <option value="gas">Gas</option>
                                <option value="propertyTax">Property Tax</option>
                                <option value="all">All Bills</option>
                            </select>
                        </div>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="billTrendsChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Dashboard -->
    <div class="main-content hidden" id="paymentDashboard">
        <div class="container">
            <div class="dashboard-header">
                <div class="dashboard-navigation">
                    <button class="btn btn--outline" id="backToPropertiesBtn">‚Üê Back to Properties</button>
                </div>
                <div class="property-info">
                    <h2 id="paymentPropertyName">Property Name</h2>
                    <p id="paymentPropertyAddress">Property Address</p>
                </div>
            </div>

            <!-- Payment Summary - Hidden -->
            <div class="payment-summary hidden">
                <div class="summary-card">
                    <h3>Total Collected</h3>
                    <span class="summary-value" id="totalCollected">‚Çπ0</span>
                </div>
                <div class="summary-card">
                    <h3>Pending Amount</h3>
                    <span class="summary-value" id="pendingAmount">‚Çπ0</span>
                </div>
                <div class="summary-card">
                    <h3>Overdue Amount</h3>
                    <span class="summary-value" id="overdueAmount">‚Çπ0</span>
                </div>
                <div class="summary-card">
                    <h3>GST Collected</h3>
                    <span class="summary-value" id="gstCollected">‚Çπ0</span>
                </div>
            </div>

            <!-- Individual Bill Sections -->
            <div class="individual-bill-sections" id="individualBillSections">
                <!-- Individual bill sections will be populated by JavaScript -->
            </div>

            <!-- Payment History Table -->
            <div class="table-container">
                <div class="table-header">
                    <h3>Payment History</h3>
                    <div class="bill-buttons-section">
                        <h4>Bill Types</h4>
                        <div class="bill-buttons" id="billButtons">
                            <!-- Bill buttons will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
                <table class="payment-table">
                    <thead>
                        <tr>
                            <th>Serial No</th>
                            <th>Date</th>
                            <th>Due Date</th>
                            <th>Base</th>
                            <th>GST (%)</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="paymentTableBody">
                        <!-- Payment history will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Property Modal -->
    <div class="modal hidden" id="propertyModal">
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add Property</h2>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            
            <!-- Tab Navigation -->
            <div class="tab-navigation">
                <button class="tab-btn active" data-tab="information">Property Information</button>
                <button class="tab-btn" data-tab="rental">Rental Management</button>
                <button class="tab-btn" data-tab="bills">Bill Tracking</button>
                <button class="tab-btn" data-tab="documents">Documents</button>
            </div>

            <div class="modal-body">
                <form id="propertyForm">
                <!-- Section 1: Property Information -->
                <div class="tab-content active" id="information">
                    <h3>Property Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Property Name *</label>
                                <input type="text" class="form-control" name="name" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Address *</label>
                                <input type="text" class="form-control" name="address" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Type of Property</label>
                                <select class="form-control" name="type" id="propertyTypeSelect">
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Rent per sqft</label>
                                <input type="number" class="form-control" name="rentPerSqft" id="rentPerSqft" readonly>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Project Name</label>
                                <input type="text" class="form-control" name="projectName">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Office No / Flat No / Shop No</label>
                                <input type="text" class="form-control" name="officerNo">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Floor No</label>
                                <input type="text" class="form-control" name="floorNo">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Furniture Details</label>
                                <select class="form-control" name="furniture">
                                    <option value="">Select</option>
                                    <option value="Fully Furnished">Fully Furnished</option>
                                    <option value="Semi-Furnished">Semi-Furnished</option>
                                    <option value="Unfurnished">Unfurnished</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Carpet Area</label>
                                <input type="text" class="form-control" name="carpetArea" placeholder="e.g., 850 sqft">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Super Built-up Area</label>
                                <input type="text" class="form-control" name="superBuiltupArea" placeholder="e.g., 1200 sqft">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Balcony Area</label>
                                <input type="text" class="form-control" name="balconyArea" placeholder="e.g., 100 sqft">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Terrace Area</label>
                                <input type="text" class="form-control" name="terraceArea" placeholder="e.g., 0 sqft">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Frontage</label>
                                <input type="text" class="form-control" name="shopFrontage" placeholder="e.g., 20 ft">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Dimensions</label>
                                <input type="text" class="form-control" name="dimensions" placeholder="e.g., 20 x 30 ft">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Ceiling Height</label>
                                <input type="text" class="form-control" name="ceilingHeight" placeholder="e.g., 10 ft">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Electricity Charges</label>
                                <select class="form-control" name="electricityCharges">
                                    <option value="">Select</option>
                                    <option value="lessor">Borne by Lessor</option>
                                    <option value="lessee">Borne by Lessee</option>
                                </select>
                            </div>
                        </div>

                        <h4>Lessor Details</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Name</label>
                                <input type="text" class="form-control" name="lessorName" placeholder="Enter lessor full name">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Contact</label>
                                <input type="tel" class="form-control" name="lessorContact" placeholder="Enter contact number">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group form-group--full">
                                <label class="form-label">Address</label>
                                <input type="text" class="form-control" name="lessorAddress" placeholder="Enter complete address">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" name="lessorEmail" placeholder="Enter email address">
                            </div>
                            <div class="form-group">
                                <label class="form-label">GSTIN</label>
                                <input type="text" class="form-control" name="lessorGstin" placeholder="e.g., 24ABCDE1234F1Z5">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">PAN No</label>
                                <input type="text" class="form-control" name="lessorPan" placeholder="e.g., ABCDE1234F">
                            </div>
                            <div class="form-group">
                                <!-- Empty div for spacing -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Rental Property</label>
                            <div class="toggle-switch">
                                <input type="checkbox" name="isRental" id="isRentalToggle" class="toggle-input">
                                <label for="isRentalToggle" class="toggle-label">
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-text">
                                        <span class="toggle-yes">Yes</span>
                                        <span class="toggle-no">No</span>
                                    </span>
                                </label>
                            </div>
                        </div>
                </div>

                <!-- Section 2: Rental Management -->
                <div class="tab-content" id="rental">
                    <h3>Rental Management</h3>
                    <!-- Rental Management Fields - Balanced Layout -->
                    <div class="form-row" style="display: flex; gap: 20px; align-items: flex-end;">
                        <div class="form-group" style="flex: 1; min-width: 220px;">
                            <label class="form-label">Rent Amount</label>
                            <div class="input-group">
                                <input type="number" class="form-control" name="rentAmount" placeholder="Enter amount" style="width: 150px;">
                                <select class="form-control" name="rentPeriod" style="width: 80px;" value="month">
                                    <option value="week">week</option>
                                    <option value="month" selected>month</option>
                                    <option value="year">year</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 220px;">
                            <label class="form-label">Rent Free Period</label>
                            <div class="input-group">
                                <input type="number" class="form-control" name="rentFreePeriodAmount" placeholder="Enter number" style="width: 100px;">
                                <select class="form-control" name="rentFreePeriodUnit" style="width: 80px;">
                                    <option value="days" selected>Days</option>
                                    <option value="months">Months</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 220px;">
                            <label class="form-label">Rent Payable Date</label>
                            <div class="input-group">
                                <input type="number" class="form-control" name="rentPayableDate" min="1" max="31" placeholder="5" style="width: 80px; text-align: center; font-weight: 600;">
                                <span class="input-group-text">of month</span>
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 220px;">
                            <label class="form-label">Agreement Tenure</label>
                            <div class="input-group">
                                <input type="number" class="form-control" name="agreementTenureAmount" min="1" max="120" value="12" placeholder="12" style="width: 80px;">
                                <select class="form-control" name="agreementTenureUnit" style="width: 80px;">
                                    <option value="months" selected>Months</option>
                                    <option value="years">Years</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-row" style="display: flex; gap: 20px; align-items: flex-end;">
                        <div class="form-group" style="flex: 1; min-width: 280px;">
                            <label class="form-label">Escalation</label>
                            <div class="input-group escalation-group">
                                <input type="number" class="form-control" name="escalationPercentage" min="0" max="100" step="0.1" value="5" placeholder="5">
                                <span class="input-group-text">% every</span>
                                <input type="number" class="form-control" name="escalationAmount" min="1" value="1" placeholder="1">
                                <select class="form-control" name="escalationPeriod">
                                    <option value="months">Months</option>
                                    <option value="years" selected>Years</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 220px;">
                            <label class="form-label">Agreement Start Date</label>
                            <div class="input-group">
                                <input type="date" class="form-control" name="agreementStartDate" style="width: 150px;">
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 220px;">
                            <label class="form-label">Security Deposit</label>
                            <div class="input-group">
                                <input type="number" class="form-control" name="securityDeposit" style="width: 150px;">
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 220px;">
                            <label class="form-label">Agreement Type</label>
                            <div class="input-group">
                                <select class="form-control" name="agreementType" id="agreementTypeSelect" style="width: 150px; border-left: none; outline: none;">
                                </select>
                            </div>
                        </div>
                    </div>

                    <h4>Lessee Details</h4>
                    <div class="form-row" style="display: flex; gap: 20px; align-items: flex-end;">
                        <div class="form-group" style="flex: 1; min-width: 280px;">
                            <label class="form-label">Name</label>
                            <div class="input-group">
                                <input type="text" class="form-control" name="lesseeName" style="width: 250px;">
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 280px;">
                            <label class="form-label">Contact Number</label>
                            <div class="input-group">
                                <input type="tel" class="form-control" name="lesseeContactNumber" placeholder="Enter contact number" style="width: 250px;">
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 280px;">
                            <label class="form-label">Email</label>
                            <div class="input-group">
                                <input type="email" class="form-control" name="lesseeEmail" style="width: 300px;">
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="differentContactPerson" id="differentContactPersonCheckbox">
                                Different Contact Person
                            </label>
                        </div>
                    </div>
                    <div class="form-row hidden" id="contactPersonNameField">
                        <div class="form-group" style="flex: 0 0 auto; width: fit-content;">
                            <label class="form-label">Contact Person Name</label>
                            <input type="text" class="form-control" name="lesseeContact" placeholder="Enter contact person name" style="width: 250px;">
                            </div>
                        </div>

                    <div class="form-row" style="display: flex; gap: 20px; align-items: flex-end;">
                        <div class="form-group" style="flex: 1; min-width: 280px;">
                            <label class="form-label">PAN No</label>
                            <div class="input-group">
                                <input type="text" class="form-control" name="lesseePan" placeholder="e.g., ABCDE1234F" style="width: 250px;">
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 280px;">
                            <label class="form-label">GSTIN</label>
                            <div class="input-group">
                                <input type="text" class="form-control" name="lesseeGstin" placeholder="e.g., 24ABCDE1234F1Z5" style="width: 250px;">
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 280px;">
                            <label class="form-label">Address Line</label>
                            <div class="input-group">
                                <input type="text" class="form-control" name="lesseeAddressLine" placeholder="Street, Building, Area" style="width: 250px;">
                            </div>
                        </div>
                    </div>

                    <div class="form-row" style="display: flex; gap: 20px; align-items: flex-end;">
                        <div class="form-group" style="flex: 1; min-width: 280px;">
                            <label class="form-label">City</label>
                            <div class="input-group">
                                <input type="text" class="form-control" name="lesseeCity" placeholder="Enter city" style="width: 250px;">
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 280px;">
                            <label class="form-label">State</label>
                            <div class="input-group">
                                <input type="text" class="form-control" name="lesseeState" placeholder="Enter state" style="width: 250px;">
                            </div>
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 280px;">
                            <label class="form-label">Pincode</label>
                            <div class="input-group">
                                <input type="text" class="form-control" name="lesseePincode" placeholder="e.g., 400001" maxlength="6" style="width: 250px;">
                            </div>
                        </div>
                    </div>

                    <div class="form-row" style="display: flex; gap: 20px; align-items: flex-end;">
                        <div class="form-group" style="flex: 1; min-width: 220px;">
                            <!-- Empty space for alignment -->
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 220px;">
                            <!-- Empty space for alignment -->
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 220px;">
                            <!-- Empty space for alignment -->
                        </div>
                        <div class="form-group" style="flex: 1; min-width: 220px;">
                            <!-- Empty space for alignment -->
                        </div>
                    </div>

                    <h4>Bank Details</h4>
                    <div class="form-row">
                        <div class="form-group" style="flex: 0 0 auto; width: fit-content;">
                            <label class="form-label">Bank Name</label>
                            <input type="text" class="form-control" name="bankName" style="width: 250px;">
                        </div>
                        <div class="form-group" style="flex: 0 0 auto; width: fit-content;">
                            <label class="form-label">Account No</label>
                            <input type="text" class="form-control" name="accountNo" style="width: 300px;">
                        </div>
                        <div class="form-group" style="flex: 0 0 auto; width: fit-content;">
                            <label class="form-label">IFSC Code</label>
                            <input type="text" class="form-control" name="ifscCode" style="width: 200px;">
                        </div>
                    </div>

                    <h4>Taxes and Charges</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="gstEnabled" id="gstCheckbox">
                                GST Applicable
                            </label>
                        </div>
                    </div>
                    <div class="form-row gst-details hidden" id="gstDetails">
                        <div class="form-group" style="flex: 0 0 auto; width: fit-content;">
                            <label class="form-label">GST Details</label>
                            <div class="input-group">
                                <select class="form-control" name="gstType" style="width: 180px;">
                                    <option value="">Select Type</option>
                                    <option value="included">Included</option>
                                    <option value="excluded">Excluded</option>
                            </select>
                                <input type="number" class="form-control" name="gstPercentage" min="0" max="100" step="0.1" placeholder="%" style="width: 80px;">
                                <span class="input-group-text">%</span>
                                <span class="input-group-text" style="background: transparent; border: none; padding: 0 8px; color: #999; font-size: 12px;">Borne By:</span>
                                <select class="form-control" name="gstBorneBy" style="width: 120px;">
                                <option value="">Select</option>
                                    <option value="lessor">Lessor</option>
                                    <option value="lessee" selected>Lessee</option>
                            </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="municipalTaxesEnabled" id="municipalTaxesCheckbox">
                                Municipal Taxes Applicable
                            </label>
                        </div>
                    </div>
                    <div class="form-row municipal-taxes-details hidden" id="municipalTaxesDetails">
                        <div class="form-group" style="flex: 0 0 auto; width: fit-content;">
                            <label class="form-label">Municipal Taxes</label>
                            <div class="input-group">
                                <input type="number" class="form-control" name="municipalTaxesAmount" placeholder="Amount" style="width: 150px;">
                                <span class="input-group-text" style="background: transparent; border: none; padding: 0 8px; color: #999; font-size: 12px;">Borne By:</span>
                                <select class="form-control" name="municipalTaxesBorneBy" style="width: 120px;">
                                <option value="">Select</option>
                                    <option value="lessor">Lessor</option>
                                    <option value="lessee">Lessee</option>
                            </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="signageTaxEnabled" id="signageTaxCheckbox">
                                Signage Tax Applicable
                            </label>
                        </div>
                    </div>
                    <div class="form-row signage-tax-details hidden" id="signageTaxDetails">
                        <div class="form-group" style="flex: 0 0 auto; width: fit-content;">
                            <label class="form-label">Signage Tax</label>
                            <div class="input-group">
                                <input type="number" class="form-control" name="signageTaxAmount" placeholder="Amount" style="width: 150px;">
                                <span class="input-group-text" style="background: transparent; border: none; padding: 0 8px; color: #999; font-size: 12px;">Borne By:</span>
                                <select class="form-control" name="signageTaxBorneBy" style="width: 120px;">
                                <option value="">Select</option>
                                    <option value="lessor">Lessor</option>
                                    <option value="lessee">Lessee</option>
                            </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="legalChargesEnabled" id="legalChargesCheckbox">
                                Legal Charges Applicable
                            </label>
                        </div>
                    </div>
                    <div class="form-row legal-charges-details hidden" id="legalChargesDetails">
                        <div class="form-group" style="flex: 0 0 auto; width: fit-content;">
                            <label class="form-label">Legal Charges</label>
                            <div class="input-group">
                                <input type="number" class="form-control" name="legalChargesAmount" placeholder="Amount" style="width: 150px;">
                                <span class="input-group-text" style="background: transparent; border: none; padding: 0 8px; color: #999; font-size: 12px;">Borne By:</span>
                                <select class="form-control" name="legalChargesBorneBy" id="legalChargesBorneBySelect" style="width: 150px;">
                                <option value="">Select</option>
                                    <option value="lessor">Lessor</option>
                                    <option value="lessee">Lessee</option>
                                    <option value="custom">Custom %</option>
                            </select>
                            </div>
                        </div>
                    </div>
                    <div class="form-row legal-charges-custom hidden" id="legalChargesCustom">
                        <div class="form-group" style="flex: 0 0 auto; width: fit-content;">
                            <label class="form-label">Custom Percentage Split</label>
                            <div class="input-group">
                                <span class="input-group-text" style="background: transparent; border: none; padding: 0 8px; color: #999; font-size: 12px;">Lessor:</span>
                                <input type="number" class="form-control" name="legalChargesLessorPercentage" placeholder="%" min="0" max="100" style="width: 80px;">
                                <span class="input-group-text">%</span>
                                <span class="input-group-text" style="background: transparent; border: none; padding: 0 8px; color: #999; font-size: 12px;">Lessee:</span>
                                <input type="number" class="form-control" name="legalChargesLesseePercentage" placeholder="%" min="0" max="100" style="width: 80px;">
                                <span class="input-group-text">%</span>
                        </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="maintenanceEnabled" id="maintenanceCheckbox">
                                Maintenance Fees Applicable
                            </label>
                        </div>
                    </div>
                    <div class="form-row maintenance-details hidden" id="maintenanceDetails">
                        <div class="form-group" style="flex: 0 0 auto; width: fit-content;">
                            <label class="form-label">Maintenance Fees</label>
                            <div class="input-group">
                                <input type="number" class="form-control" name="maintenanceAmount" placeholder="Amount" style="width: 150px;">
                                <span class="input-group-text" style="background: transparent; border: none; padding: 0 8px; color: #999; font-size: 12px;">Borne By:</span>
                                <select class="form-control" name="maintenanceBorneBy" style="width: 120px;">
                                <option value="">Select</option>
                                    <option value="lessor">Lessor</option>
                                    <option value="lessee">Lessee</option>
                            </select>
                        </div>
                        </div>
                    </div>

                </div>

                <!-- Section 3: Bill Tracking -->
                <div class="tab-content" id="bills">
                    <h3>Bill Tracking</h3>
                    <div class="bills-section" id="billsSection">
                        <!-- Bills will be populated by JavaScript -->
                    </div>
                    <div class="custom-bills">
                        <h4>Custom Bills</h4>
                        <div id="customBillsList"></div>
                        <button type="button" class="btn btn--secondary" id="addCustomBillBtn">Add Custom Bill</button>
                    </div>
                </div>

                <!-- Section 4: Documents -->
                <div class="tab-content" id="documents">
                    <h3>Document Management</h3>
                    <div class="document-upload">
                        <div class="form-group">
                            <label for="documentNameInput">Document Name: <span class="required">*</span></label>
                            <input type="text" class="form-control" id="documentNameInput" placeholder="Enter document name" required>
                        </div>
                        <div class="form-group">
                            <label for="documentInput">Select Files:</label>
                            <input type="file" class="form-control" id="documentInput" multiple accept=".pdf,.doc,.docx,.jpg,.png">
                        </div>
                        <div class="form-group">
                            <button type="button" class="btn btn--secondary" id="uploadDocBtn">Add Document</button>
                        </div>
                    </div>
                    <div class="document-list" id="documentList">
                        <!-- Documents will be populated by JavaScript -->
                    </div>
                </div>
                </form>
            </div>

            <div class="modal-footer">
                <button class="btn btn--outline" id="cancelBtn">Cancel</button>
                <button class="btn btn--primary" id="savePropertyBtn">Save Property</button>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal hidden" id="paymentModal">
        <div class="modal-overlay" id="paymentModalOverlay"></div>
        <div class="modal-content payment-modal-content">
            <div class="modal-header">
                <h2>Receive Payment</h2>
                <button class="modal-close" id="paymentModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form id="paymentForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Base Amount</label>
                            <input type="number" class="form-control" id="baseAmount" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">GST (18%)</label>
                            <input type="number" class="form-control" id="gstAmount" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Total Amount</label>
                            <input type="number" class="form-control" id="totalAmount" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Payment Date *</label>
                            <input type="date" class="form-control" id="paymentDate" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Payment Mode *</label>
                            <select class="form-control" id="paymentMode" required>
                                <option value="">Select Mode</option>
                                <option value="Cash">Cash</option>
                                <option value="Cheque">Cheque</option>
                                <option value="Online">Online</option>
                                <option value="UPI">UPI</option>
                                <option value="NEFT">NEFT</option>
                                <option value="RTGS">RTGS</option>
                                <option value="Bank Transfer">Bank Transfer</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Receipt Number</label>
                            <input type="text" class="form-control" id="receiptNumber">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Notes</label>
                        <textarea class="form-control" id="paymentNotes" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn--outline" id="paymentCancelBtn">Cancel</button>
                <button class="btn btn--primary" id="submitPaymentBtn">Submit Payment</button>
            </div>
        </div>
    </div>

    <!-- Table Settings Modal -->
    <div class="modal hidden" id="tableSettingsModal">
        <div class="modal-overlay" id="tableSettingsOverlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>Table Column Settings</h2>
                <button class="modal-close" onclick="closeTableSettings()">&times;</button>
            </div>
            <div class="modal-body">
                <p>Select which columns to display in the properties table:</p>
                
                <div class="column-settings">
                    <div class="column-category">
                        <h4>Basic Information</h4>
                        <div id="basicColumns" class="column-checkboxes"></div>
                    </div>
                    
                    <div class="column-category">
                        <h4>Property Information</h4>
                        <div id="propertyColumns" class="column-checkboxes"></div>
                    </div>
                    
                    <div class="column-category">
                        <h4>Rental Information</h4>
                        <div id="rentalColumns" class="column-checkboxes"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn--outline" onclick="resetTableColumns()">Reset to Default</button>
                <button class="btn btn--primary" onclick="applyTableSettings()">Apply Changes</button>
            </div>
        </div>
    </div>


    <script src="config.js?v=1.1"></script>
    <script src="app.js?v=1.1"></script>
</body>
</html>